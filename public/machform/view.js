$(function(){$("form.appnitro").data("active_element","");var a=$("form.appnitro").data("highlightcolor");$("form.appnitro :input").bind("click focus",function(){var b=$(this).closest("li").not(".matrix");$("form.appnitro").data("active_element",b.attr("id"));if(b.hasClass("highlighted")!=true){$("form.appnitro li.highlighted").removeClass("highlighted");if(a!=""){b.siblings().not("#li_resume_email").stop();b.siblings().not("#li_resume_email").removeAttr("style");b.animate({backgroundColor:a},500,"swing",function(){if(b.attr("id")==$("form.appnitro").data("active_element")){b.addClass("highlighted").removeAttr("style");b.siblings().not("#li_resume_email").removeAttr("style")}else{b.removeAttr("style")}})}else{b.addClass("highlighted").removeAttr("style")}}});if($("#main_body div.file_queue").length>0){$("form.appnitro").submit(function(){if($("form.appnitro").data("form_submitting")!==true){$("#li_buttons > input[type=submit]").prop("disabled",true);$("form.appnitro").data("form_submitting",true);upload_all_files();return false}else{return true}});$("#submit_secondary").click(function(){$("#li_buttons").append('<input type="hidden" name="submit_secondary" value="1" />')});$("#submit_primary").click(function(){$("#li_buttons").append('<input type="hidden" name="submit_primary" value="1" />')})}if($("#li_resume_checkbox").length>0){$("#element_resume_checkbox").bind("change",function(){if($(this).prop("checked")==true){$("#li_resume_email").show();$("#li_buttons > input").hide();$("#li_buttons").append('<input type="button" value="'+$("#li_resume_email").data("resumelabel")+'" name="button_save_form" class="button_text" id="button_save_form">');$("#button_save_form").click(function(){$("#li_buttons").append('<input type="hidden" id="generate_resume_url" name="generate_resume_url" value="1" />');$("form.appnitro").submit()})}else{$("#li_resume_email").hide();$("#button_save_form").remove();$("#li_buttons > input").show()}if($("html").hasClass("embed")){$.postMessage({mf_iframe_height:$("body").outerHeight(true)},"*",parent)}});if($("#li_resume_email").data("resumebutton")=="1"){$("#li_buttons > input").hide();$("#li_buttons").append('<input type="button" value="'+$("#li_resume_email").data("resumelabel")+'" name="button_save_form" class="button_text" id="button_save_form">');$("#button_save_form").click(function(){$("#li_buttons").append('<input type="hidden" id="generate_resume_url" name="generate_resume_url" value="1" />');$("form.appnitro").submit()})}$("form.appnitro").submit(function(){if($("#li_buttons > input:visible").attr("id")=="button_save_form"){$("#li_buttons").append('<input type="hidden" id="generate_resume_url" name="generate_resume_url" value="1" />')}})}if($(".total_payment").length>0){calculate_total_payment();$('#main_body li[data-pricefield="radio"]').delegate("input.radio","click",function(g){var c=$(this);var f=c.attr("id").split("_");var b=f[1];var d=c.data("pricedef");if(d==null){d=0}$("#li_"+b).data("pricevalue",d);calculate_total_payment()});$('#main_body li[data-pricefield="checkbox"]').delegate("input.checkbox","click",function(g){var d=$(this).attr("id").split("_");var b=d[1];var c=$("#li_"+b+" input.checkbox");var f=0;c.each(function(e){if($(this).data("pricedef")!=null&&$(this).prop("checked")==true){f+=$(this).data("pricedef")}});$("#li_"+b).data("pricevalue",f);calculate_total_payment()});$('#main_body li[data-pricefield="select"]').delegate("select","change",function(f){var d=$(this).attr("id").split("_");var b=d[1];var c=$(this).find("option:selected").data("pricedef");if(c==null){c=0}$("#li_"+b).data("pricevalue",c);calculate_total_payment()});$('#main_body li[data-pricefield="money"]').delegate("input.text","keyup mouseout change",function(f){var c=$(this).attr("id").split("_");var b=c[1];var d=$("#element_"+b+"_1").val()+"."+$("#element_"+b+"_2").val();d=parseFloat(d);if(isNaN(d)){d=0}$("#li_"+b).data("pricevalue",d);calculate_total_payment()});$('#main_body li[data-pricefield="money_simple"]').delegate("input.text","keyup mouseout change",function(f){var c=$(this).attr("id").split("_");var b=c[1];var d=$(this).val();d=parseFloat(d);if(isNaN(d)){d=0}$("#li_"+b).data("pricevalue",d);calculate_total_payment()})}if($("form.appnitro ul.password").length>0){$("#main_body").addClass("no_guidelines")}});function calculate_total_payment(){var a=0;$("#main_body li[data-pricevalue]").each(function(b){a+=parseFloat($(this).data("pricevalue"))});a+=parseFloat($(".total_payment").data("basetotal"));$(".total_payment var").text(a.toFixed(2))}function select_date(b){var a=$(this).attr("id").split("_");$("#element_"+a[1]+"_1").val(b.length?b[0].getMonth()+1:"");$("#element_"+a[1]+"_2").val(b.length?b[0].getDate():"");$("#element_"+a[1]+"_3").val(b.length?b[0].getFullYear():"")}function select_europe_date(b){var a=$(this).attr("id").split("_");$("#element_"+a[1]+"_2").val(b.length?b[0].getMonth()+1:"");$("#element_"+a[1]+"_1").val(b.length?b[0].getDate():"");$("#element_"+a[1]+"_3").val(b.length?b[0].getFullYear():"")}function remove_attachment(c,b,a,g,e,f){var d="";if(typeof __machform_path!="undefined"){d=__machform_path}$("#"+g+" > div.cancel img").attr("src","images/loader_small_grey.gif");$.ajax({type:"POST",async:true,url:d+"delete_file_upload.php",data:{filename:c,form_id:b,element_id:a,holder_id:g,is_db_live:e,key_id:f},cache:false,global:true,dataType:"json",error:function(k,h,j){$("#"+g+" > div.cancel img").attr("src",d+"images/icons/delete.png");alert("Error! Unable to delete file.")},success:function(h){if(h.status=="ok"){$("#"+h.holder_id).fadeOut("slow",function(){$(this).remove()})}else{$("#"+g+" > div.cancel img").attr("src",d+"images/icons/delete.png");alert("Error while deleting the file. Please try again.")}}})}function check_upload_queue(c,d,b,e){if(d==true){var a=$("#element_"+c+"_queue").children().not(".uploadifyError");if(a.length>b){alert(e);for(i=0;i<=a.length;i++){if(i>=b){$("#element_"+c).uploadifyCancel(a.eq(i).attr("id").slice(-6))}}}}}function upload_all_files(){$("#main_body div.uploadifyQueueItem").not(".completed").parent().siblings("input.element").eq(0).uploadifyUpload();if($("#main_body div.uploadifyQueueItem").not(".completed").length<1){$("form.appnitro").submit()}}function count_input(a,c){var b=0;if(c=="c"||c=="d"){b=$("#element_"+a).val().length}else{if(c=="w"){b=$("#element_"+a).val().trim().split(/[\s\.]+/).length}}$("#currently_entered_"+a).text(b);return b}function limit_input(a,c,d){var b=count_input(a,c);if(b>d){if(c=="c"||c=="d"){$("#element_"+a).val($("#element_"+a).val().substr(0,d));$("#currently_entered_"+a).text(d)}else{if(c=="w"){}}}}function clear_cb_other(b,a){if($(b).prop("checked")==false){$("#element_"+a+"_other").val("")}};